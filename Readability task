/* I had to code a task that calculates the grade level given the number of letters, words, and sentences. The formula I had to use was the
 Coleman-Liau index. I think i've gotten pretty comfortable with loops and am now starting to really learn to implement them in arrays. Also,
 i've picked up the habit of always having the documentation close so that i can reach for any existing functions instead of manually checking for 
 some things or creating them myself*/
 
#include <cs50.h>
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <wctype.h>
#include <math.h>

int count_letters(string text);
int count_words(string text);
int count_sentences(string text);
int main(void)
{
    string text = get_string("Text: "); //prompt user to input a string using a string function
    int letters = count_letters(text);
    int words = count_words(text);
    int sentences = count_sentences(text);

    float L = ((float) letters / (float) words) * 100.0;

    float S = ((float) sentences / (float) words) * 100.0;

    float index = ((0.0588 * L) - (0.296 * S) - 15.8); //formula to calculate grades
    int f_index = lrint(index); //rounds to nearest integer

    if (f_index < 1)
    {
        printf("Before Grade 1\n");
    }
    else if (f_index > 16)
    {
        printf("Grade 16+\n");
    }
    else
    {
        printf("Grade %i\n", f_index);
    }
}

//calculate the number of letters, words, and sentences
//any punctutation means the end of a sentence

int count_letters(string text) //calculates the number of letters
{
    int sum = 0;
    for (int i = 0; i < strlen(text); i++)
    {
        if (isalpha(text[i]))
        {
            sum++;
        }
    }
    return sum;
}

int count_words(string text) //calculate number of words
{
    int k = 1;
    for (int i = 0; i < strlen(text); i++)
    {
        if (text[i] == ' ')
        {
            k++;
        }
    }
    return k;
}

int count_sentences(string text) //calculate number of sentences
{
    int k = 0;
    for (int i = 0; i < strlen(text); i++)
    {
        if (text[i] == '.' || text[i] == '!' || text[i] == '?')
        {
            k++;
        }
    }
    return k;
}
